{"version":3,"sources":["game/solve.js","game/elimination.js","game/Square.js","game/Vector2.js","game/FireworkParticle.js","game/Utils.js","game/Firework.js","game/p5.js","game/game.js","state.js","components/Sidebar.js","components/CanvasDiv.js","components/App.js","index.js"],"names":["solve","game","time","m","n","A","matrix","pos","i","j","I","k","filter","x","forEach","buildAugmentedMatrix","length","pivots","isSolvable","lastPivotRow","elimination","pivotRow","findPivotInCol","swapRows","eliminateRows","startRow","col","y","pivotCol","timeEnd","buildEmpty","N","j_","sol","res","Square","this","w","h","p5","push","fill","getColor","rect","showSolution","solution","r","cx","cy","stroke","strokeWeight","circle","pop","editMode","toggleSquare","updateSolution","Vector2","v","Math","sqrt","mag","mult","div","atan2","angle","theta","cos","sin","random","randomUnit","normalize","FireworkParticle","size","color","lifespan","vel","acc","initLifespan","add","setAlpha","min","max","FireWork","particles","explode","particle","fireworkParticles","accX","abs","maxAccY","applyForce","canvas","parent","gravity","setup","parentNode","createCanvas","offsetWidth","offsetHeight","onselectstart","oncontextmenu","newGame","initMatrix","draw","getBoundingClientRect","width","height","resizeCanvas","checkWindowResize","update","clear","squares","drawSquares","fireworks","drawFireworks","gap","initX","updateSquares","win","firework","Firework","floor","sqrtW","sqrtH","spawnFirework","updateFireworks","mousePressed","e","type","checkMouseClick","mouseX","mouseY","windowResized","debug","state","isImpossible","setImpossibleGUI","isSolved","reset","updateN","updateM","tries","console","log","initP5","setupP5","label","useGlobalState","createGlobalState","openSidebar","Sidebar","opened","setEditMode","setShowSolution","useState","setImpossible","setM","setN","Div","cursor","Slider","value","aria-labelledby","step","marks","onChange","val","style","margin","Button","variant","onClick","Switch","checked","target","visibility","marginTop","styled","React","createRef","CanvasDiv","setOpenSidebar","useMediaQuery","useEffect","current","id","ref","openIcon","closeIcon","sidebarButton","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ad9fde5.chunk.js","sourcesContent":["import game from 'game/game'\r\nimport elimination from 'game/elimination'\r\n\r\nexport default function solve() {\r\n  game.time('solve')\r\n  let {m, n} = game\r\n  let A = buildAugmentedMatrix()\r\n  let [_, pivots, isSolvable] = elimination(A)\r\n  if(!isSolvable) {\r\n    game.timeEnd('solve')\r\n    return [buildEmpty(), true]\r\n  }\r\n  let x = [], N = A.length\r\n  // assign value to free variables\r\n  for(let j = 0; j < N; j++)\r\n    if(!(j in pivots))\r\n      x[j] = 0\r\n  // compute x\r\n  for(let j = N-1; j >= 0; j--) {\r\n    if(!(j in pivots)) continue\r\n    let i = pivots[j]\r\n    x[j] = A[i][N]\r\n    for(let j_ = j+1; j_ < N; j_++)\r\n      x[j] = (x[j] + A[i][j_] * x[j_]) % 2\r\n  }\r\n  // convert solution vector x to matrix\r\n  let sol = []\r\n  for(let i = 0; i < m; i++) {\r\n    sol[i] = []\r\n    for(let j = 0; j < n; j++)\r\n      sol[i][j] = x[i*n+j]\r\n  }\r\n  game.timeEnd('solve')\r\n  return [sol, false]\r\n}\r\n\r\nfunction buildAugmentedMatrix() {\r\n  const {m, n, matrix} = game\r\n  const pos = (i, j) => {\r\n    if(i < 0 || j < 0 || i >= m || j >= n) \r\n      return -1\r\n    return i*n + j\r\n  }\r\n  const A = []\r\n  for(let i = 0; i < m; i++) {\r\n    for(let j = 0; j < n; j++) {\r\n      let I = pos(i, j)\r\n      A[I] = []\r\n      for(let k = 0; k < m*n; k++)\r\n        A[I][k] = 0\r\n      ;[pos(i, j), pos(i-1, j), pos(i, j-1), pos(i+1, j), pos(i, j+1)]\r\n      .filter(x => x != -1).forEach(x => A[I][x] = 1)\r\n      A[I][m*n] = matrix[i][j]\r\n    }\r\n  }\r\n  return A\r\n}\r\n\r\nfunction buildEmpty() {\r\n  const {m, n} = game\r\n  let res = []\r\n  for(let i = 0; i < m; i++) {\r\n    res[i] = []\r\n    for(let j = 0; j < n; j++) {\r\n      res[i][j] = 0\r\n    }\r\n  }\r\n  return res\r\n}\r\n","// reduces the augmented matrix A to row echelon form with operations modulo 2\r\n// returns [reduced A, pivots, isSolvable]\r\nexport default function elimination(A) {\r\n  const m = A.length, n = A[0].length, pivots = {}\r\n  let isSolvable = true, lastPivotRow = -1\r\n  elimination:\r\n  for(let i = 0, j = 0; i < m && j < n-1; i++, j++) {\r\n    let pivotRow = findPivotInCol(i, j)\r\n    while(pivotRow == -1) {\r\n      if(++j >= n-1) break elimination\r\n      pivotRow = findPivotInCol(i, j)\r\n    }\r\n    swapRows(i, pivotRow)\r\n    eliminateRows(i, j)\r\n    lastPivotRow = pivots[j] = i\r\n  }\r\n  for(let i = lastPivotRow+1; i < m; i++) {\r\n    if(A[i][n-1] != 0) {\r\n      isSolvable = false\r\n      break\r\n    }\r\n  }\r\n  return [A, pivots, isSolvable]\r\n\r\n  // returns pivot row or -1 if no pivot found\r\n  function findPivotInCol(startRow, col) {\r\n    for(let i = startRow; i < m; i++)\r\n      if(A[i][col] != 0)\r\n        return i\r\n    return -1\r\n  }\r\n\r\n  function swapRows(x, y) {\r\n    [A[x], A[y]] = [A[y], A[x]]\r\n  }\r\n\r\n  function eliminateRows(pivotRow, pivotCol) {\r\n    for(let i = pivotRow+1; i < m; i++) {\r\n      if(A[i][pivotCol] == 0) continue\r\n      for(let j = pivotCol; j < n; j++)\r\n        A[i][j] = (A[i][j] + A[pivotRow][j]) % 2\r\n    }\r\n  }\r\n}\r\n","import game from 'game/game'\r\n\r\nexport default class Square {\r\n  constructor(i, j) {\r\n    this.x = this.y = this.w = this.h = 0\r\n    this.i = i\r\n    this.j = j\r\n  }\r\n  \r\n  update(x, y, w, h) {\r\n    this.x = x\r\n    this.y = y\r\n    this.w = w\r\n    this.h = h\r\n  }\r\n\r\n  draw(p5) {\r\n    p5.push()\r\n    p5.fill(this.getColor())\r\n    p5.rect(this.x, this.y, this.w, this.h)\r\n    if(game.showSolution && game.solution[this.i][this.j]) {\r\n      let r = .05 * this.w,\r\n      cx = this.x + this.w - r - .04*this.w,\r\n      cy = this.y + this.h - r - .04*this.h\r\n      p5.fill('#ff0000')\r\n      p5.stroke('#ffffff')\r\n      p5.strokeWeight(.2)\r\n      p5.circle(cx, cy, 2*r)\r\n    }\r\n    p5.pop()\r\n  }\r\n\r\n  checkMouseClick(x, y) {\r\n    if(x >= this.x && x <= this.x+this.w && y >= this.y && y <= this.y+this.h) {\r\n      const {m, n, editMode} = game\r\n      const {i, j} = this\r\n      game.toggleSquare(i, j)\r\n      if(!editMode) {\r\n        if(i-1 >= 0) game.toggleSquare(i-1, j)\r\n        if(j-1 >= 0) game.toggleSquare(i, j-1)\r\n        if(i+1 < m) game.toggleSquare(i+1, j)\r\n        if(j+1 < n) game.toggleSquare(i, j+1)\r\n      }\r\n      game.updateSolution()\r\n    }\r\n  }\r\n\r\n  getColor() {\r\n    switch(game.matrix[this.i][this.j]) {\r\n      case 0: return '#000000'\r\n      case 1: return '#f2fc32'\r\n      default: return '#ffffff'\r\n    }\r\n  }\r\n}","export default class Vector2 {\r\n  constructor(x, y) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  add(v) {\r\n    this.x += v.x\r\n    this.y += v.y\r\n    return this\r\n  }\r\n\r\n  sub(v) {\r\n    this.x -= v.x\r\n    this.y -= v.y\r\n    return this\r\n  }\r\n\r\n  mult(k) {\r\n    this.x *= k\r\n    this.y *= k\r\n    return this\r\n  }\r\n\r\n  div(k) {\r\n    this.x /= k\r\n    this.y /= k\r\n    return this\r\n  }\r\n\r\n  mag() {\r\n    return Math.sqrt(this.x*this.x + this.y*this.y)\r\n  }\r\n\r\n  normalize() {\r\n    let k = this.mag()\r\n    if(k == 0) this.mult(0)\r\n    else this.div(k)\r\n    return this\r\n  }\r\n\r\n  dot(v) {\r\n    return this.x * v.x + this.y * v.y \r\n  }\r\n\r\n  angle() {\r\n    return Math.atan2(this.y, this.x)\r\n  }\r\n\r\n  angleBetween(v) {\r\n    return v.angle() - this.angle()\r\n  }\r\n\r\n  rotate(theta) {\r\n    let cos = Math.cos(theta), sin = Math.sin(theta), x = this.x, y = this.y\r\n    this.x = x*cos - y*sin\r\n    this.y = x*sin + y*cos\r\n    return this\r\n  }\r\n}\r\n\r\nVector2.random = () => new Vector2(Math.random()*2-1, Math.random()*2-1)\r\nVector2.randomUnit = () => Vector2.random().normalize()","import Vector2 from 'game/Vector2'\r\n\r\nexport default class FireworkParticle {\r\n  constructor(x, y, size, color, lifespan) {\r\n    this.pos = new Vector2(x, y)\r\n    this.vel = new Vector2(0, 0)\r\n    this.acc = new Vector2(0, 0)\r\n    this.size = size\r\n    this.color = color\r\n    this.lifespan = this.initLifespan = lifespan\r\n  }\r\n  applyForce(x, y) {\r\n    this.acc.x += x\r\n    this.acc.y += y\r\n  }\r\n  update() {\r\n    this.lifespan--\r\n    this.vel.add(this.acc)\r\n    this.pos.add(this.vel)\r\n    this.acc.mult(0)\r\n    this.color.setAlpha(this.lifespan / this.initLifespan * 255)\r\n  }\r\n  draw(p5) {\r\n    p5.push()\r\n    p5.fill(this.color)\r\n    p5.stroke(this.color)\r\n    p5.circle(this.pos.x, this.pos.y, this.size)\r\n    p5.pop()\r\n  }\r\n}","export function random(min, max) {\r\n  return Math.random() * (max - min) + min\r\n}","import FireworkParticle from 'game/FireworkParticle'\r\nimport {random} from 'game/Utils'\r\nimport Vector2 from 'game/Vector2'\r\nimport game from 'game/game'\r\n\r\nexport default class FireWork {\r\n  constructor(x, y, size, color, lifespan, particles) {\r\n    this.pos = new Vector2(x, y)\r\n    this.vel = new Vector2(0, 0)\r\n    this.acc = new Vector2(0, 0)\r\n    this.size = size\r\n    this.color = color\r\n    this.lifespan = this.initLifespan = lifespan\r\n    this.particles = particles\r\n  }\r\n  applyForce(x, y) {\r\n    this.acc.x += x\r\n    this.acc.y += y\r\n  }\r\n  update() {\r\n    this.lifespan--\r\n    this.vel.add(this.acc)\r\n    this.pos.add(this.vel)\r\n    this.acc.mult(0)\r\n    this.color.setAlpha(this.lifespan / this.initLifespan * 255)\r\n    if(this.vel.y > 1)\r\n      this.explode()\r\n  }\r\n  explode() {\r\n    this.lifespan = 0\r\n    for(let i = 0; i < 30; i++) {\r\n      let particle = new FireworkParticle(this.pos.x, this.pos.y, 6, this.color, 70)\r\n      game.fireworkParticles.push(particle)\r\n      const minAccY = -4, maxAccY = 1, accX = Math.abs(maxAccY-minAccY)/2\r\n      particle.applyForce(random(-accX, accX), random(minAccY, maxAccY))\r\n    }\r\n  }\r\n  draw(p5) {\r\n    p5.push()\r\n    p5.fill(this.color)\r\n    p5.stroke(this.color)\r\n    p5.circle(this.pos.x, this.pos.y, this.size)\r\n    p5.pop()\r\n  }\r\n}","import Firework from 'game/Firework'\r\nimport FireworkParticle from 'game/FireworkParticle'\r\nimport {random} from 'game/Utils'\r\nimport Vector2 from 'game/Vector2'\r\n\r\nexport default (p5, game) => {\r\n  let canvas, parent\r\n  const gravity = new Vector2(0, .1)\r\n\r\n  p5.setup = () => {\r\n    parent = p5.canvas.parentNode\r\n    canvas = p5.createCanvas(parent.offsetWidth, parent.offsetHeight).canvas\r\n    canvas.onselectstart = () => false\r\n    canvas.oncontextmenu = () => false\r\n    game.newGame(game.initMatrix)\r\n  }\r\n\r\n  p5.draw = () => {\r\n    checkWindowResize() \r\n    p5.update()\r\n    p5.clear()\r\n    drawSquares()\r\n    drawFireworks()\r\n  }\r\n\r\n  p5.update = () => {\r\n    updateSquares()\r\n    if(game.win && Math.random() < 0.0165)\r\n      spawnFirework()\r\n    updateFireworks()\r\n  }\r\n\r\n  p5.mousePressed = e => {\r\n    if(e.type != 'mousedown') \r\n      return true\r\n    let {m, n, squares} = game\r\n    for(let i = 0; i < m; i++) {\r\n      for(let j = 0; j < n; j++) {\r\n        if(squares[i] && squares[i][j])\r\n          squares[i][j].checkMouseClick(p5.mouseX, p5.mouseY)\r\n      }\r\n    }\r\n  }\r\n\r\n  p5.windowResized = () => {\r\n    const {width, height} = parent.getBoundingClientRect()\r\n    p5.resizeCanvas(width, height)\r\n  }\r\n\r\n  function updateSquares() {\r\n    const {gap, n, m, squares} = game\r\n    const {width, height} = p5\r\n    if(height/m < width/n) {\r\n      const size = height/m - gap - gap/m\r\n      const initX = (width - n*(size+gap) - gap) / 2 + gap\r\n      for(let i = 0, y = gap; i < m; i++, y += size+gap) {\r\n        for(let j = 0, x = initX; j < n; j++, x += size+gap) {\r\n          squares[i][j].update(x, y, size, size)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      const size = width/n - gap - gap/n\r\n      const initY = (height - m*(size+gap) - gap) / 2 + gap\r\n      for(let i = 0, y = initY; i < m; i++, y += size+gap) {\r\n        for(let j = 0, x = gap; j < n; j++, x += size+gap) {\r\n          squares[i][j].update(x, y, size, size)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function drawSquares() {\r\n    const {m, n, squares} = game\r\n    for(let i = 0; i < m; i++)\r\n      for(let j = 0; j < n; j++)\r\n        squares[i][j].draw(p5)\r\n  }\r\n\r\n  function updateFireworks() {\r\n    const {fireworks, fireworkParticles} = game\r\n    fireworks.forEach(x => {\r\n      x.applyForce(gravity.x, gravity.y)\r\n      x.update()\r\n    })\r\n    fireworkParticles.forEach(x => {\r\n      x.applyForce(gravity.x, gravity.y)\r\n      x.update()\r\n    })\r\n    game.fireworks = fireworks.filter(x => x.lifespan > 0)\r\n    game.fireworkParticles = fireworkParticles.filter(x => x.lifespan > 0)\r\n  }\r\n\r\n  function drawFireworks() {\r\n    const {fireworks, fireworkParticles} = game\r\n    fireworks.forEach(x => x.draw(p5))\r\n    fireworkParticles.forEach(x => x.draw(p5))\r\n  }\r\n\r\n  function spawnFirework() {\r\n    const {width, height} = parent.getBoundingClientRect()\r\n    const firework = new Firework(random(.3*width, .7*width), height, 6, p5.color(`hsl(${Math.floor(Math.random()*360)}, 100%, 50%)`), 100*3, game.fireworkParticles)\r\n    const sqrtW = Math.sqrt(width), sqrtH = Math.sqrt(height)\r\n    game.fireworks.push(firework)\r\n    firework.applyForce(random(-.08*sqrtW, .08*sqrtW), random(-.45*sqrtH, -.2*sqrtH))\r\n  }\r\n\r\n  function checkWindowResize() {\r\n    const {width, height} = parent.getBoundingClientRect()\r\n    if(p5.width != width || p5.height != height) {\r\n      p5.resizeCanvas(width, height)\r\n    }\r\n  }\r\n}","import solve from 'game/solve'\r\nimport Square from 'game/Square'\r\nimport setupP5 from 'game/p5'\r\n\r\nconst game = {\r\n  debug: false,\r\n  m: 6,\r\n  n: 6,\r\n  showSolution: false,\r\n  editMode: false,\r\n  gap: 3,\r\n  state: 'PLAY',\r\n  initMatrix: [\r\n    [1,1,0,1,0,0],\r\n    [1,1,1,0,1,0],\r\n    [0,1,1,0,0,1],\r\n    [1,0,0,1,1,0],\r\n    [0,1,0,1,1,1],\r\n    [0,0,1,0,1,1]\r\n  ],\r\n  matrix: null,\r\n  squares: null,\r\n  solution: null,\r\n  isImpossible: false,\r\n  setImpossibleGUI: () => {},\r\n  fireworks: [],\r\n  fireworkParticles: [],\r\n  win: true,\r\n  updateSolution() {\r\n    [this.solution, this.isImpossible] = solve(this.matrix)\r\n    this.setImpossibleGUI(this.isImpossible)\r\n    this.win = this.isSolved()\r\n  },\r\n  isSolved() {\r\n    for(let i = 0; i < this.m; i++)\r\n      for(let j = 0; j < this.n; j++)\r\n        if(this.matrix[i][j])\r\n          return false\r\n    return true\r\n  },\r\n  reset() {\r\n    this.newGame()\r\n  },\r\n  updateN(n) {\r\n    this.n = n\r\n    this.newGame()\r\n  },\r\n  updateM(m) {\r\n    this.m = m\r\n    this.newGame()\r\n  },\r\n  newGame(initMatrix) {\r\n    let tries = 0\r\n    do {\r\n      this.updateSquares(initMatrix)\r\n    } while ((this.isImpossible && ++tries < 250) || this.win)\r\n    if(game.debug) console.log(`tries: ${tries}`)\r\n  },\r\n  updateSquares(initMatrix) {\r\n    this.matrix = []\r\n    this.squares = []\r\n    for(let i = 0; i < this.m; i++) {\r\n      this.matrix[i] = []\r\n      this.squares[i] = []\r\n      for(let j = 0; j < this.n; j++) {\r\n        this.matrix[i][j] = initMatrix ? initMatrix[i][j] : Math.floor(Math.random()*2)\r\n        this.squares[i][j] = new Square(i, j)\r\n      }\r\n    }\r\n    this.updateSolution()\r\n  },\r\n  toggleSquare(i, j) {\r\n    this.matrix[i][j] = (this.matrix[i][j] + 1) % 2\r\n  },\r\n  initP5(p5) {\r\n    setupP5(p5, this)\r\n  },\r\n  time(label) {\r\n    if(this.debug) console.time(label)\r\n  },\r\n  timeEnd(label) {\r\n    if(this.debug) console.timeEnd(label)\r\n  }\r\n}\r\n\r\nexport default game\r\n","import {createGlobalState} from 'react-hooks-global-state'\r\nimport game from 'game/game'\r\n\r\nexport const {useGlobalState} = createGlobalState({\r\n  openSidebar: false,\r\n  editMode: game.editMode,\r\n  showSolution: game.showSolution\r\n})\r\n","import React, {useState} from 'react'\r\nimport {Slider, Switch, Button} from '@material-ui/core'\r\nimport game from 'game/game'\r\nimport styled from 'styled-components'\r\nimport {useGlobalState} from 'state' \r\n\r\nexport default function Sidebar() {\r\n  const [opened, setOpened] = useGlobalState('openSidebar')\r\n  const [editMode, setEditMode] = useGlobalState('editMode')\r\n  const [showSolution, setShowSolution] = useGlobalState('showSolution')\r\n  const [isImpossible, setImpossible] = useState(game.isImpossible)\r\n  game.setImpossibleGUI = setImpossible\r\n  const [m, setM] = useState(game.m)\r\n  const [n, setN] = useState(game.n)\r\n  return <>\r\n    <Div opened={opened} cursor={editMode ? 'copy' : 'auto'}>\r\n      <h1>Lights Out!</h1>\r\n\r\n      <h2>Width: {n}</h2>\r\n      <Slider\r\n        value={n}\r\n        aria-labelledby=\"discrete-slider\"\r\n        // valueLabelDisplay=\"auto\"\r\n        step={1} marks min={1} max={10}\r\n        onChange={(e, val) => {\r\n          if(n == val) return\r\n          game.updateN(val)\r\n          setN(val)\r\n          setImpossible(game.isImpossible)\r\n        }}\r\n        style={{\r\n          width: '80%',\r\n          margin: '0 0 20px 0'\r\n        }}\r\n      />\r\n\r\n      <h2>Height: {m}</h2>\r\n      <Slider\r\n        value={m}\r\n        aria-labelledby=\"discrete-slider\"\r\n        step={1} marks min={1} max={10}\r\n        onChange={(e, val) => {\r\n          if(m == val) return\r\n          game.updateM(val)\r\n          setM(val)\r\n          setImpossible(game.isImpossible)\r\n        }}\r\n        style={{\r\n          width: '80%',\r\n          margin: '0 0 20px 0'\r\n        }}\r\n      />   \r\n      \r\n      <Button variant=\"outlined\" color=\"primary\" onClick={() => {\r\n        game.reset()\r\n        setM(game.m)\r\n        setN(game.n)\r\n        setShowSolution(game.showSolution)\r\n        setEditMode(game.editMode)\r\n        setImpossible(game.isImpossible)\r\n      }}>\r\n        Shuffle\r\n      </Button>\r\n\r\n      <h2>Show Solution</h2>\r\n      <div style={{margin: '0 0 13px 0'}}>\r\n        <Switch checked={showSolution} color=\"primary\" onChange={e => {\r\n          setShowSolution(e.target.checked)\r\n          game.showSolution = e.target.checked\r\n        }}/>\r\n      </div>\r\n\r\n      <h2>Edit Mode</h2>\r\n      <div style={{margin: '0 0 13px 0'}}>\r\n        <Switch checked={editMode} color=\"primary\" onChange={e => {\r\n          setEditMode(e.target.checked)\r\n          game.editMode = e.target.checked\r\n        }}/>\r\n      </div>\r\n\r\n      <h2 style={{\r\n        visibility: isImpossible ? 'visible' : 'hidden',\r\n        marginTop: '15px',\r\n        color: 'red'\r\n      }}>\r\n        No Solution!\r\n      </h2>\r\n\r\n    </Div>\r\n  </>\r\n}\r\n\r\nconst Div = styled.div`\r\n  flex: ${({opened}) => opened * 40};\r\n  background-color: #d4faef;\r\n  overflow-x: hidden;\r\n  transition: flex .75s;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: ${({cursor}) => cursor};\r\n\r\n  h1 {\r\n    margin: 15px 15px 30px 15px;\r\n    text-align: center;\r\n    font-size: 35px;\r\n  }\r\n\r\n  h2 {\r\n    margin: 0 0 0 0;\r\n    text-align: center;\r\n    // align-self: flex-start;\r\n  }\r\n\r\n  Switch {\r\n    margin: 0 0 20px 0;\r\n  }\r\n\r\n  Button {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  ::-webkit-scrollbar {\r\n    width: 4px;\r\n    background-color: #F5F5F5;\r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: #000000;\r\n    border: 2px solid #555555;\r\n  }\r\n`\r\n","import React, {useEffect} from 'react'\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft'\r\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\nimport styled from 'styled-components'\r\nimport {useGlobalState} from 'state' \r\nimport p5 from 'p5'\r\nimport game from 'game/game'\r\n\r\nconst div = React.createRef()\r\n\r\nexport default function CanvasDiv() {\r\n  const [openSidebar, setOpenSidebar] = useGlobalState('openSidebar')\r\n  const [editMode] = useGlobalState('editMode')\r\n  const portrait = useMediaQuery('(orientation: portrait)')\r\n  \r\n  useEffect(() => {\r\n    new p5(p5 => {\r\n      game.initP5(p5)\r\n    }, div.current)\r\n  }, [])\r\n  return <>\r\n    <Div cursor={editMode ? 'copy' : 'auto'}>\r\n      <div id=\"canvasDiv\" ref={div}></div>\r\n      {sidebarButton()}\r\n      <p>:D</p>\r\n    </Div>\r\n  </>\r\n\r\n  function sidebarButton() {\r\n    const openIcon = false ? <KeyboardArrowDownIcon /> : <ChevronLeftIcon />\r\n    const closeIcon = false ? <KeyboardArrowUpIcon /> : <ChevronRightIcon />\r\n    return <>\r\n      <button onClick={() => setOpenSidebar(x => !x)}>\r\n        {openSidebar ? openIcon : closeIcon}\r\n      </button>\r\n    </>\r\n  }\r\n}\r\n\r\nconst Div = styled.div`\r\n  flex: 100;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: row;\r\n  cursor: ${({cursor}) => cursor};\r\n\r\n  #canvasDiv {\r\n    flex: 1;\r\n    background-color: #dbf7ff;\r\n    overflow: hidden;\r\n  }\r\n\r\n  button {\r\n    position: absolute;\r\n    margin: 3px;\r\n    background-color: #dbf7ff;\r\n    display: inline-block;\r\n    opacity: .7;\r\n    border: 0;\r\n    padding: 0;\r\n    z-index: 10;\r\n    outline: none;\r\n    width: 30px;\r\n    height: 30px;\r\n  }\r\n\r\n  button:hover {\r\n    outline: solid;\r\n    outline-color: #002fff;\r\n    outline-width: 1px;\r\n  }\r\n\r\n  p {\r\n    display: none;\r\n    position: absolute;\r\n    margin: 3px;\r\n    color: #ff0000;\r\n    background-color: transparent;\r\n    font-size: 25px;\r\n    bottom: 5px;\r\n    right: 5px;\r\n    opacity: .7;\r\n    border: 0;\r\n    padding: 0;\r\n    z-index: 10;\r\n    outline: none;\r\n  }\r\n\r\n`\r\n","import React from 'react'\nimport Sidebar from 'components/Sidebar'\nimport CanvasDiv from 'components/CanvasDiv'\n\nexport default function App() {\n  return <>\n    <Sidebar />\n    <CanvasDiv />\n  </>\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'index.css'\n\nimport App from 'components/App'\n\nReactDOM.render(<App/>, document.getElementById('root'))\n"],"sourceRoot":""}